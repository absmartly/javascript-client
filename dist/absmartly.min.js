!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.absmartly=e():t.absmartly=e()}(self,(function(){return function(){var t={899:function(t,e,n){"use strict";var r;e.default=void 0;var o={Client:((r=n(225))&&r.__esModule?r:{default:r}).default};e.default=o},225:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=(r=n(204))&&r.__esModule?r:{default:r};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._opts=Object.assign({agent:"javascript-client",apiKey:void 0,application:void 0,endpoint:void 0,environment:void 0,retries:5,timeout:500},e);for(var n=0,r=["agent","application","apiKey","endpoint","environment"];n<r.length;n++){var o=r[n];if(!(o in this._opts)||void 0===this._opts[o])throw new Error("Missing '".concat(o,"' in options argument"));var s=this._opts[o];if("string"!=typeof s||0===s.length){if("application"===o&&null!==s&&"object"===i(s)&&"name"in s)continue;throw new Error("Invalid '".concat(o,"' in options argument"))}}"string"==typeof this._opts.application&&(this._opts.application={name:this._opts.application,version:0}),this._delay=Math.max(10,this._opts.timeout/(1<<this._opts.retries))}var e,n,r;return e=t,r=[{key:"stringify",value:function(t){return JSON.stringify(t,null,0)}}],(n=[{key:"createContext",value:function(t){var e={units:t.units};return this.post("/context",null,e)}},{key:"refreshContext",value:function(t){var e={guid:t.guid,units:t.units};return this.post("/context",null,e)}},{key:"publish",value:function(t){var e={guid:t.guid,units:t.units};return Array.isArray(t.goals)&&t.goals.length>0&&(e.goals=t.goals),Array.isArray(t.exposures)&&t.exposures.length>0&&(e.exposures=t.exposures),Array.isArray(t.attributes)&&t.attributes.length>0&&(e.attributes=t.attributes),this.put("/context",null,e)}},{key:"getExperiments",value:function(t){return this.get("/experiment",t)}},{key:"createVariantOverride",value:function(t){var e={units:t.units,overrides:t.overrides};return this.post("/override",null,e)}},{key:"getVariantOverride",value:function(e){var n=Object.assign({},e,{units:t.stringify(e.units)});return this.get("/override",n)}},{key:"removeVariantOverride",value:function(e){var n=Object.assign({},e,{units:t.stringify(e.units)});return this.delete("/override",n)}},{key:"request",value:function(t,e,n,r){var i=this,s="".concat(this._opts.endpoint).concat(e);if(n){var u=Object.keys(n);if(u.length>0){var a=u.map((function(t){return"".concat(t,"=").concat(encodeURIComponent(n[t]))})).join("&");s="".concat(s,"?").concat(a)}}var l=function(){return(0,o.default)(s,{method:t,headers:{"Content-Type":"application/json","X-API-Key":i._opts.apiKey,"X-Agent":i._opts.agent,"X-Environment":i._opts.environment,"X-Application":i._opts.application.name,"X-Application-Version":i._opts.application.version||0},body:void 0!==r?JSON.stringify(r,null,0):void 0}).then((function(t){if(!t.ok){var e=t.status>=400&&t.status<500;return t.text().then((function(n){var r=new Error(null!==n&&n.length>0?n:t.statusText);return r._bail=e,Promise.reject(r)}))}return t.json()}))},c=function(t){return new Promise((function(e){setTimeout(e,t)}))};return function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return l().catch((function(s){if(s._bail||r>=e||o>=n)return Promise.reject(s);var u=(1<<r)*i._delay+.5*Math.random()*i._delay;return o+u>n&&(u=n-o),c(u).then((function(){return t(e,n,r+1,o+u)}))}))}(this._opts.retries,this._opts.timeout)}},{key:"post",value:function(t,e,n){return this.request("POST",t,e,n)}},{key:"put",value:function(t,e,n){return this.request("PUT",t,e,n)}},{key:"get",value:function(t,e){return this.request("GET",t,e)}},{key:"delete",value:function(t,e){return this.request("DELETE",t,e)}}])&&s(e.prototype,n),r&&s(e,r),t}();e.default=u},204:function(t,e,n){t.exports=self.fetch||(self.fetch=n(869).default||n(869))},869:function(t,e,n){"use strict";function r(t,e){return e=e||{},new Promise((function(n,r){var o=new XMLHttpRequest,i=[],s=[],u={},a=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:a,headers:{keys:function(){return i},entries:function(){return s},get:function(t){return u[t.toLowerCase()]},has:function(t){return t.toLowerCase()in u}}}};for(var l in o.open(e.method||"get",t,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){i.push(e=e.toLowerCase()),s.push([e,n]),u[e]=u[e]?u[e]+","+n:n})),n(a())},o.onerror=r,o.withCredentials="include"==e.credentials,e.headers)o.setRequestHeader(l,e.headers[l]);o.send(e.body||null)}))}n.r(e),n.d(e,{default:function(){return r}})}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}return n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(899)}().default}));