!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.absmartly=t():e.absmartly=t()}(self,(function(){return function(){var e={899:function(e,t,n){"use strict";var r;t.default=void 0;var o={Client:((r=n(225))&&r.__esModule?r:{default:r}).default};t.default=o},225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(204))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._opts=Object.assign({endpoint:void 0,apiKey:void 0,environment:void 0,agent:"javascript-client",application:{name:"default",version:0},retries:5,timeout:500},t);for(var n=0,r=["apiKey","endpoint","environment"];n<r.length;n++){var o=r[n];if(!(o in this._opts)||void 0===this._opts[o])throw new Error("Missing '".concat(o,"' in options argument"));var i=this._opts[o];if("string"!=typeof i||0===i.length)throw new Error("Invalid '".concat(o,"' in options argument"))}this._delay=Math.max(10,this._opts.timeout/(1<<this._opts.retries))}var t,n,r;return t=e,r=[{key:"stringify",value:function(e){return JSON.stringify(e,null,0)}}],(n=[{key:"createContext",value:function(e){var t={units:e.units};return this.post("/context",null,t)}},{key:"refreshContext",value:function(e){var t={guid:e.guid,units:e.units};return this.post("/context",null,t)}},{key:"publish",value:function(e){var t={guid:e.guid,units:e.units};return Array.isArray(e.goals)&&e.goals.length>0&&(t.goals=e.goals),Array.isArray(e.exposures)&&e.exposures.length>0&&(t.exposures=e.exposures),Array.isArray(e.attributes)&&e.attributes.length>0&&(t.attributes=e.attributes),this.put("/context",null,t)}},{key:"getExperiments",value:function(e){return this.get("/experiment",e)}},{key:"createVariantOverride",value:function(e){var t={units:e.units,overrides:e.overrides};return this.post("/override",null,t)}},{key:"getVariantOverride",value:function(t){var n=Object.assign({},t,{units:e.stringify(t.units)});return this.get("/override",n)}},{key:"removeVariantOverride",value:function(t){var n=Object.assign({},t,{units:e.stringify(t.units)});return this.delete("/override",n)}},{key:"request",value:function(e,t,n,r){var i=this,s="".concat(this._opts.endpoint).concat(t);if(n){var u=Object.keys(n);if(u.length>0){var a=u.map((function(e){return"".concat(e,"=").concat(encodeURIComponent(n[e]))})).join("&");s="".concat(s,"?").concat(a)}}var l=function(){return(0,o.default)(s,{method:e,headers:{"Content-Type":"application/json","X-API-Key":i._opts.apiKey,"X-Agent":i._opts.agent,"X-Environment":i._opts.environment,"X-Application":i._opts.application.name,"X-Application-Version":i._opts.application.version||0},body:void 0!==r?JSON.stringify(r,null,0):void 0}).then((function(e){if(!e.ok){var t=e.status>=400&&e.status<500;return e.text().then((function(n){var r=new Error(null!==n&&n.length>0?n:e.statusText);return r._bail=t,Promise.reject(r)}))}return e.json()}))},c=function(e){return new Promise((function(t){setTimeout(t,e)}))};return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return l().catch((function(s){if(s._bail||r>=t||o>=n)return Promise.reject(s);var u=(1<<r)*i._delay+.5*Math.random()*i._delay;return o+u>n&&(u=n-o),c(u).then((function(){return e(t,n,r+1,o+u)}))}))}(this._opts.retries,this._opts.timeout)}},{key:"post",value:function(e,t,n){return this.request("POST",e,t,n)}},{key:"put",value:function(e,t,n){return this.request("PUT",e,t,n)}},{key:"get",value:function(e,t){return this.request("GET",e,t)}},{key:"delete",value:function(e,t){return this.request("DELETE",e,t)}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=s},204:function(e,t,n){e.exports=self.fetch||(self.fetch=n(869).default||n(869))},869:function(e,t,n){"use strict";function r(e,t){return t=t||{},new Promise((function(n,r){var o=new XMLHttpRequest,i=[],s=[],u={},a=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:a,headers:{keys:function(){return i},entries:function(){return s},get:function(e){return u[e.toLowerCase()]},has:function(e){return e.toLowerCase()in u}}}};for(var l in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){i.push(t=t.toLowerCase()),s.push([t,n]),u[t]=u[t]?u[t]+","+n:n})),n(a())},o.onerror=r,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(l,t.headers[l]);o.send(t.body||null)}))}n.r(t),n.d(t,{default:function(){return r}})}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}return n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(899)}().default}));